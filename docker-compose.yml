version: '3'
services:
  gateway:
    container_name: gateway-node
    restart: always
    build: ./gateway
    ports:
      - '3333:3333'
    links:
      - hello-service
      - welcome-service

  hello-service:
    container_name: hello-service
    restart: always
    build: ./helloService
    ports:
      - '2222:2222'
    links:
      - hello-mongo

  welcome-service:
    container_name: welcome-service
    restart: always
    build: ./welcomeService
    ports:
      - '1111:1111'
    links:
      - welcome-mongo

  hello-mongo:
    image: mongo
    container_name: hello-mongo
    volumes:
      - "/var/lib/mongodb-hello:/data/db"
    ports:
      - '27017:27017'

  welcome-mongo:
    image: mongo
    container_name: welcome-mongo
    volumes:
      - "/var/lib/mongodb-welcome:/data/db"
    ports:
      - '27018:27017'